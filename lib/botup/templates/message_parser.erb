module <%= class_name %>
  class MessageParser
    DEFAULT_COMMAND = :help.freeze
    COMMANDS = %i[test].freeze

    attr_reader :message, :commands

    def initialize(message:)
      @message = message
    end

    def command
      COMMANDS.find { |command| command == parsed_message&.first&.to_sym } || DEFAULT_COMMAND
    end

    def params
      parsed_message&.drop(1) || []
    end

    private

    def can_parse?
      message_present? && message_starts_with_slash?
    end

    def message_present?
      message.text&.length&.positive?
    end

    def message_starts_with_slash?
      message.text.start_with?("/")
    end

    def parsed_message
      return unless can_parse?

      message.text[1..-1].split(" ")
    end
  end
end
